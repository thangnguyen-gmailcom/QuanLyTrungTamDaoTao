<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<header th:replace="manager-page/layout.html::header"></header>

<body>
<!--[if lt IE 8]>
<p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
<![endif]-->


<!-- Start Left menu area -->
<div th:replace="manager-page/layout.html::left-sidebar-pro">
</div>
<!-- End Left menu area -->


<!-- Start Welcome area -->
<div class="all-content-wrapper">
    <div th:replace="manager-page/layout.html::container-fluid"/>
    <div th:replace="manager-page/layout.html::header-advance-area"></div>
    <!-- Single pro tab review Start-->
    <div class="single-pro-review-area mt-t-30 mg-b-15">
        <div class="container-fluid" style="margin-top: 3%">
            <div class="row">
                <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">
                    <div class="profile-info-inner">
                        <div class="profile-img">
                            <th:block th:if="${user.image} == null">
                            <img src="img/profile/1.jpg" alt="" />
                            </th:block>
                            <th:block  th:if="${user.image} != null">
                                <img th:src="@{'/upload/'+${user.image}}" alt="" />
                            </th:block>
                        </div>
                        <div class="profile-details-hr">
                            <div class="row">
                                <div class="col-lg-6 col-md-12 col-sm-12 col-xs-6">
                                    <div class="address-hr">
                                        <p><b>Họ Tên</b><br /><span th:utext="${user.fullname}"></span></p>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-md-12 col-sm-12 col-xs-6">
                                    <div class="address-hr tb-sm-res-d-n dps-tb-ntn">
                                        <p><b>Ngày Sinh</b><br /> <span id="dateOfBirth" th:utext="${user.dateOfBirth}"></span></p>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-6 col-md-12 col-sm-12 col-xs-6">
                                    <div class="address-hr">
                                        <p><b>Email</b><br /><span th:utext="${user.email}"></span></p>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-md-12 col-sm-12 col-xs-6">
                                    <div class="address-hr tb-sm-res-d-n dps-tb-ntn">
                                        <p><b>SDT</b><br /><span th:utext="${user.phoneNumber}"></span></p>
                                    </div>
                                </div>
<!--                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-6">-->
<!--                                    <div class="address-hr tb-sm-res-d-n dps-tb-ntn">-->
<!--                                        <p><b>Địa chỉ</b><br /><span th:utext="${user.ward.wardName}+','"></span><span th:utext="${user.ward.district.distinctName}+','"></span><span th:utext="${user.ward.district.province.provinceName}"></span></p>-->
<!--                                    </div>-->
<!--                                </div>-->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-8 col-md-8 col-sm-8 col-xs-12">
                    <div class="product-payment-inner-st res-mg-t-30 analysis-progrebar-ctn">
                        <ul id="myTabedu1" class="tab-review-design">
                            <li class="active"><a href="#description">Cập Nhật Thông Tin Cá Nhân</a></li>
                        </ul>
                        <div id="myTabContent" class="tab-content custom-product-edit">
                            <div class="product-tab-list tab-pane fade active in" id="description">
                                <div class="row">
                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                        <div class="review-content-section">
                                            <div class="row">
                                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                    <div class="review-content-section">
                                                        <div id="dropzone1" class="pro-ad">
                                                            <form th:action="@{/profileEdit}" enctype="multipart/form-data" method="post" th:object="${user}" class="dropzone dropzone-custom needsclick add-professors" id="demo1-upload">
                                                                <div class="row">
                                                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                                                        <div class="form-group">
                                                                            <input type="hidden" th:field="*{id}">
                                                                            <input th:field="*{password}" type="hidden" value="" class="form-control">
                                                                            <small class="form-text text-muted"
                                                                                   th:if="${#fields.hasErrors('password')}"
                                                                                   th:errors="*{password}">Name Error</small>
                                                                        </div>
                                                                        <div class="form-group">
                                                                            <label>Email</label>
                                                                            <input th:field="*{email}" type="text" class="form-control" placeholder="Email" readonly>
                                                                            <small class="form-text text-muted"
                                                                                   th:if="${#fields.hasErrors('email')}"
                                                                                   th:errors="*{email}">Name Error</small>
                                                                        </div>
                                                                        <div class="form-group">
                                                                            <label>Họ Tên</label>
                                                                            <input th:field="*{fullname}" type="text" class="form-control" placeholder="FullName">
                                                                            <small class="form-text text-muted"
                                                                                   th:if="${#fields.hasErrors('fullname')}"
                                                                                   th:errors="*{fullname}">Name Error</small>
                                                                        </div>
                                                                        <div class="form-group">
                                                                            <label>Số Điện Thoại</label>
                                                                            <input th:field="*{phoneNumber}" type="number" class="form-control" placeholder="Number Phone"/>
                                                                            <small class="form-text text-muted"
                                                                                   th:if="${#fields.hasErrors('phoneNumber')}"
                                                                                   th:errors="*{phoneNumber}">Name Error</small>
                                                                        </div>
                                                                        <div class="form-group">
                                                                            <label>Số CMND hoặc Thẻ Căn Cước</label>
                                                                            <input th:field="*{idCard}" id="postcode" type="text" class="form-control" placeholder="Số CMND hoặc thẻ căn cước" readonly>
                                                                            <small class="form-text text-muted"
                                                                                   th:if="${#fields.hasErrors('idCard')}"
                                                                                   th:errors="*{idCard}">Name Error</small>
                                                                        </div>
                                                                        <div class="form-group data-custon-pick" id="data_2">
                                                                            <b>Ngày Sinh</b>
                                                                            <div class="input-group date"></div>
                                                                            <input type="date" class="form-control" th:field="*{dateOfBirth}">
                                                                            <small class="form-text text-muted"
                                                                                   th:if="${#fields.hasErrors('dateOfBirth')}"
                                                                                   th:errors="*{dateOfBirth}">Name Error</small>
                                                                            <div></div>
                                                                        </div>
                                                                        <div class="form-group">
                                                                            <label>Avatar</label>
                                                                            <div class="custom-file">
                                                                                <input type="hidden" th:field="*{image}">
                                                                                <input type="file" name="imageUrl" class="custom-file-input" id="customFile" th:file="*{imageUrl}">
                                                                                <th:block th:if="${user.image} == null">
                                                                                <label class="custom-file-label" for="customFile">Choose File</label>
                                                                                </th:block>
                                                                                <th:block th:if="${user.image} != null">
                                                                                    <label class="custom-file-label" for="customFile" th:utext="${user.image}"></label>
                                                                                </th:block>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                                                        <div class="form-group res-mg-t-15">
                                                                            <label>Giới Thiệu</label>
                                                                            <textarea th:field="*{information}" placeholder="Description" style="height: 107px"></textarea>
                                                                        </div>
                                                                        <div class="form-group">
                                                                            <label>Giới Tính</label>
                                                                            <select th:field="*{gender}" class="form-control">
                                                                                <option value=-1 selected="selected">Giới Tính</option>
                                                                                <option value=0>Male</option>
                                                                                <option value=1>Female</option>
                                                                                <option value=3>Other</option>
                                                                            </select>
                                                                        </div>
                                                                        <div class="form-group">
                                                                            <label>Tỉnh - Thành Phố</label>
                                                                            <select id="provinces" name="province" class="form-control">
                                                                                <option value="none" selected=""  disabled="">Tỉnh - Thành Phố</option>
                                                                            </select>
                                                                        </div>
                                                                        <div class="form-group">
                                                                            <label>Quận -  Huyện</label>
                                                                            <select name="state" id="districts" class="form-control">
                                                                                <option value="none" selected="" disabled="">Quận -  Huyện</option>
                                                                            </select>
                                                                        </div>
                                                                        <div class="form-group">
                                                                            <label>Xã Phường - Thị Trấn</label>
                                                                            <select th:field="*{ward.wardCode}" id="ward" class="form-control">
                                                                                <option th:value="${user.ward.wardCode}" id="wardDis" selected=""></option>
                                                                            </select>
                                                                            <small class="form-text text-muted"
                                                                                   th:if="${#fields.hasErrors('ward.wardCode')}"
                                                                                   th:errors="*{ward.wardCode}">Name Error</small>
                                                                        </div>
                                                                        <input type="hidden" th:field="*{roles.id}" id="roId">
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-lg-1">
                                                                        <div class="payment-adress">
                                                                            <button type="submit" class="btn btn-primary waves-effect waves-light">Submit</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </form>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<footer th:replace="manager-page/layout.html::scrip"></footer>
<script type="text/javascript">
    let apiUrl = "https://tht-center.herokuapp.com";
    // let apiUrl = "http://localhost:8080/api";
    var provinces = {};
    provinces.showAllProvince = function (){
        $.ajax({
            url :apiUrl+"/provinces/",
            method : "GET",
            dataType : "json",
            success : function (data){
                $.each(data,function (i,v){
                    $('#provinces').append(`<option value="${v.provinceCode}">${v.provinceName}</option>`)
                })
            }
        })
    };

    provinces.findByWardCode= function (){
        let idWard = $('#wardDis').val();
        $.ajax({
            url : apiUrl+"/provinces/districts/ward/"+idWard,
            method : "GET",
            dataType : "json",
            success : function (data){
                $('#ward').empty('');
                $('#ward').append(`<option value="${data.wardCode}" id="wardDis" selected="">${data.wardName}</option>`)
            }
        })
    }

    $(document).ready(function () {
        document.getElementById("dateOfBirth").innerHTML = moment(document.getElementById("dateOfBirth").innerHTML).format("YYYY-MM-DD")
        provinces.showAllProvince();
        provinces.findByWardCode();
        $('#provinces').change(function (event){
            let provinceCode = $('#provinces').val();
            $.ajax({
                url : apiUrl+"/provinces/districts/"+provinceCode,
                method: "GET",
                dataType: "json",
                success : function (data){
                    $('#districts').empty('');
                    $.each(data,function (i,v){
                        $('#districts').append(`<option value="${v.districtCode}">${v.distinctName}</option>`)
                    })
                }
            })
        })
        $('#districts').change(function (event){
            let districtCode = $('#districts').val();
            $.ajax({
                url : apiUrl+"/provinces/districts/wards/"+districtCode,
                method: "GET",
                dataType: "json",
                success : function (data){
                    $('#ward').empty('');
                    $.each(data,function (i,v){
                        $('#ward').append(`<option value="${v.wardCode}">${v.wardName}</option>`)
                    })
                }
            })
        })
    })
</script>
</body>

</html>